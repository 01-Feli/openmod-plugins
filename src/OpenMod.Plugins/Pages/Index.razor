@page "/"

@inject IPluginRepository PluginRepository

@if (_plugins == null)
{
    <MudText Typo="Typo.body1">Loading</MudText>
}
else
{
    <MudText Typo="Typo.h4">
        @Smart.Format("There {0:plural:is 1 plugin|are {} plugins}", _plugins.Count)
    </MudText>

    <br>
    <br>

    <MudGrid>
        @foreach (var plugin in _plugins)
        {
            <PluginCard Data="@plugin"/>
        }
    </MudGrid>
}

@code {

    private IReadOnlyList<OpenMod.Plugins.Data.Plugin>? _plugins;

    protected override async Task OnInitializedAsync()
    {
        _plugins = await PluginRepository.SearchAsync(query: "", skip: 0, take: 20, includePrerelease: true);
    }

}
